<!DOCTYPE html>
<html>
<head>
    <title>Telco Churn Prediction</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f6f8;
        }
        .container {
            width: 500px;
            margin: 40px auto;
            background: #ffffff;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h2 {
            text-align: center;
        }
        label {
            font-weight: bold;
            display: block;
            margin-top: 10px;
        }
        input {
            width: 100%;
            padding: 6px;
            margin-top: 4px;
        }
        button {
            width: 100%;
            padding: 10px;
            margin-top: 20px;
            background-color: #007bff;
            color: white;
            border: none;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .result {
            margin-top: 20px;
            padding: 10px;
            background: #eef;
            text-align: center;
            font-size: 18px;
        }
    </style>
</head>

<body>
<div class="container">
    <h2>Telco Customer Churn Prediction</h2>

    <form id="predictForm">
        <label>Tenure (months)</label>
        <input type="number" id="tenure" step="1" required>

        <label>Monthly Charges</label>
        <input type="number" id="MonthlyCharges" step="0.01" required>

        <label>Total Charges</label>
        <input type="number" id="TotalCharges" step="0.01" required>

        <label>Total Services Subscribed</label>
        <input type="number" id="TotalServicesSubscribed" step="1" required>

        <label>Contract: Month-to-month (1=yes, 0=no)</label>
        <input type="number" id="Contract_Month-to-month" min="0" max="1" required>

        <label>Contract: Two year (1=yes, 0=no)</label>
        <input type="number" id="Contract_Two year" min="0" max="1" required>

        <label>Internet Service: Fiber optic (1=yes, 0=no)</label>
        <input type="number" id="InternetService_Fiber optic" min="0" max="1" required>

        <label>Paperless Billing (1=yes, 0=no)</label>
        <input type="number" id="PaperlessBilling" min="0" max="1" required>

        <label>Payment Method: Electronic Check (1=yes, 0=no)</label>
        <input type="number" id="PaymentMethod_Electronic check" min="0" max="1" required>

        <label>Payment Method: Bank Transfer (automatic) (1=yes, 0=no)</label>
        <input type="number" id="PaymentMethod_Bank transfer (automatic)" min="0" max="1" required>

        <label>Device Protection (1=yes, 0=no)</label>
        <input type="number" id="DeviceProtection" min="0" max="1" required>

        <label>Senior Citizen (1=yes, 0=no)</label>
        <input type="number" id="SeniorCitizen" min="0" max="1" required>

        <button type="submit">Predict Churn</button>
    </form>

    <div class="result" id="result"></div>
</div>

<script>
document.getElementById("predictForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const data = {
        "tenure": Number(document.getElementById("tenure").value),
        "MonthlyCharges": Number(document.getElementById("MonthlyCharges").value),
        "TotalCharges": Number(document.getElementById("TotalCharges").value),
        "TotalServicesSubscribed": Number(document.getElementById("TotalServicesSubscribed").value),
        "Contract_Month-to-month": Number(document.getElementById("Contract_Month-to-month").value),
        "Contract_Two year": Number(document.getElementById("Contract_Two year").value),
        "InternetService_Fiber optic": Number(document.getElementById("InternetService_Fiber optic").value),
        "PaperlessBilling": Number(document.getElementById("PaperlessBilling").value),
        "PaymentMethod_Electronic check": Number(document.getElementById("PaymentMethod_Electronic check").value),
        "PaymentMethod_Bank transfer (automatic)": Number(document.getElementById("PaymentMethod_Bank transfer (automatic)").value),
        "DeviceProtection": Number(document.getElementById("DeviceProtection").value),
        "SeniorCitizen": Number(document.getElementById("SeniorCitizen").value)
    };

    fetch("/predict_api", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({"data": data})
    })
    .then(response => response.json())
    .then(result => {
        const label = result.prediction === 1 ? "CHURN" : "NO CHURN";
        document.getElementById("result").innerHTML =
            `Churn Probability: <b>${result.churn_probability}</b><br>
             Prediction: <b>${label}</b>`;
    });
});
</script>

</body>
</html>
